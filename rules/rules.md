# Architecture & RÃ¨gles de Projet

Ce document est le guide de rÃ©fÃ©rence unique pour la structure du projet. Son respect est impÃ©ratif pour garantir la cohÃ©rence et la maintenabilitÃ©.

## 1. Arborescence ComplÃ¨te du Projet

L'architecture est modulaire. Elle est composÃ©e de **FonctionnalitÃ©s** autonomes (ex: `dashboard`) et d'un rÃ©pertoire **PartagÃ©** (`_shared`).

```
â”œâ”€ prisma/                      # DATABASE - Configuration Prisma (OBLIGATOIRE Ã  la racine)
â”‚  â””â”€ schema.prisma             # DATABASE - SchÃ©ma de base de donnÃ©es avec modÃ¨les
â”œâ”€ src/app/                     # APPLICATION - Code source principal
â”‚  â”œâ”€ _shared/                  # CODE PARTAGÃ‰ Ã€ TOUTE L'APPLICATION
â”‚  â”‚  â”œâ”€ components/            # Composants UI gÃ©nÃ©riques rÃ©utilisables
â”‚  â”‚  â”‚  â”œâ”€ SessionProvider.tsx # AUTH - Provider NextAuth pour client
â”‚  â”‚  â”‚  â”œâ”€ ThemeProvider.tsx   # THEME - Provider pour le thÃ¨me
â”‚  â”‚  â”‚  â”œâ”€ ThemeToggle.tsx     # THEME - Bouton pour changer de thÃ¨me
â”‚  â”‚  â”‚  â”œâ”€ button.tsx          # UI - Composant bouton de base
â”‚  â”‚  â”‚  â”œâ”€ ExempleComposant1.tsx # EXEMPLE - Composant rÃ©utilisable 1
â”‚  â”‚  â”‚  â””â”€ ExempleComposant2.tsx # EXEMPLE - Composant rÃ©utilisable 2
â”‚  â”‚  â”œâ”€ database/              # DATABASE - Gestion base de donnÃ©es avec Prisma
â”‚  â”‚  â”‚  â”œâ”€ client.ts           # DATABASE - Client Prisma principal (singleton)
â”‚  â”‚  â”‚  â”œâ”€ types.ts            # DATABASE - Types de base de donnÃ©es et utilitaires
â”‚  â”‚  â”‚  â””â”€ queries/            # DATABASE - RequÃªtes organisÃ©es par modÃ¨le
â”‚  â”‚  â”‚     â”œâ”€ user.ts          # DATABASE - RequÃªtes CRUD pour les utilisateurs
â”‚  â”‚  â”‚     â””â”€ [model].ts       # DATABASE - Exemple - RequÃªtes pour autres modÃ¨les
â”‚  â”‚  â”œâ”€ hooks/                 # Hooks React globaux
â”‚  â”‚  â”‚  â”œâ”€ useAuth.ts          # AUTH - Hook principal d'authentification NextAuth
â”‚  â”‚  â”‚  â”œâ”€ useDatabase.ts      # DATABASE - Hook pour opÃ©rations base de donnÃ©es
â”‚  â”‚  â”‚  â”œâ”€ use-mobile.ts       # UI - Hook dÃ©tection mobile (existant)
â”‚  â”‚  â”‚  â”œâ”€ ExempleHook1.ts     # EXEMPLE - Hook global 1
â”‚  â”‚  â”‚  â””â”€ ExempleHook2.ts     # EXEMPLE - Hook global 2
â”‚  â”‚  â”œâ”€ lib/                   # Fonctions utilitaires partagÃ©es
â”‚  â”‚  â”‚  â”œâ”€ auth.ts             # AUTH - Configuration NextAuth avec adapter Prisma
â”‚  â”‚  â”‚  â”œâ”€ auth-client.ts      # AUTH - Wrapper compatibilitÃ© (rÃ©exporte useAuth)
â”‚  â”‚  â”‚  â”œâ”€ utils.ts            # UI - Fonctions utilitaires (ex: cn pour classnames)
â”‚  â”‚  â”‚  â”œâ”€ ExempleLib1.ts      # EXEMPLE - Utilitaire partagÃ© 1
â”‚  â”‚  â”‚  â””â”€ ExempleLib2.ts      # EXEMPLE - Utilitaire partagÃ© 2
â”‚  â”‚  â””â”€ types/                 # Types TypeScript partagÃ©s
â”‚  â”‚     â”œâ”€ auth.ts             # AUTH - Types d'authentification Ã©tendus
â”‚  â”‚     â”œâ”€ common.ts           # EXEMPLE - Types communs
â”‚  â”‚     â””â”€ api.ts              # EXEMPLE - Types d'API partagÃ©s
â”‚  â”‚
â”‚  â”œâ”€ api/                      # TOUTES LES APIs DE L'APPLICATION (Next.js App Router)
â”‚  â”‚  â”œâ”€ auth/                  # AUTH - APIs NextAuth (OBLIGATOIRE)
â”‚  â”‚  â”‚  â””â”€ [...nextauth]/      # AUTH - Route NextAuth dynamique
â”‚  â”‚  â”‚     â””â”€ route.ts         # AUTH - Handler NextAuth avec Google Provider
â”‚  â”‚  â”œâ”€ users/                 # DATABASE - APIs pour gestion utilisateurs
â”‚  â”‚  â”‚  â”œâ”€ route.ts            # DATABASE - Endpoints GET/POST utilisateurs avec auth
â”‚  â”‚  â”‚  â””â”€ [id]/               # DATABASE - Routes par ID utilisateur
â”‚  â”‚  â”‚     â””â”€ route.ts         # DATABASE - Endpoints GET/PATCH/DELETE par ID
â”‚  â”‚  â””â”€ dashboard/             # EXEMPLE - APIs pour la page principale
â”‚  â”‚     â”œâ”€ route.ts            # EXEMPLE - Endpoints page principale
â”‚  â”‚     â”œâ”€ services.ts         # EXEMPLE - Logique mÃ©tier page principale
â”‚  â”‚     â”œâ”€ types.ts            # EXEMPLE - Types spÃ©cifiques page principale
â”‚  â”‚     â””â”€ settings/           # EXEMPLE - APIs pour la sous-page
â”‚  â”‚        â”œâ”€ route.ts         # EXEMPLE - Endpoints sous-page
â”‚  â”‚        â”œâ”€ services.ts      # EXEMPLE - Logique mÃ©tier sous-page
â”‚  â”‚        â””â”€ types.ts         # EXEMPLE - Types spÃ©cifiques sous-page
â”‚  â”‚
â”‚  â”œâ”€ login/                    # AUTH - PAGE DE CONNEXION (Route: /login)
â”‚  â”‚  â”œâ”€ components/            # Composants SPÃ‰CIFIQUES Ã  la page login
â”‚  â”‚  â”‚  â”œâ”€ LoginButton.tsx     # AUTH - Bouton "Connexion avec Google"
â”‚  â”‚  â”‚  â”œâ”€ ExempleComposant1.tsx # EXEMPLE - Composant login 1
â”‚  â”‚  â”‚  â””â”€ ExempleComposant2.tsx # EXEMPLE - Composant login 2
â”‚  â”‚  â”œâ”€ hooks/                 # Hooks SPÃ‰CIFIQUES Ã  la page login
â”‚  â”‚  â”‚  â”œâ”€ ExempleHook1.ts     # EXEMPLE - Hook login 1
â”‚  â”‚  â”‚  â””â”€ ExempleHook2.ts     # EXEMPLE - Hook login 2
â”‚  â”‚  â”œâ”€ lib/                   # Libs SPÃ‰CIFIQUES Ã  la page login
â”‚  â”‚  â”‚  â”œâ”€ ExempleLib1.ts      # EXEMPLE - Lib login 1
â”‚  â”‚  â”‚  â””â”€ ExempleLib2.ts      # EXEMPLE - Lib login 2
â”‚  â”‚  â”œâ”€ page.tsx               # AUTH - Page de connexion principale
â”‚  â”‚  â””â”€ types.ts               # AUTH - Types spÃ©cifiques Ã  login
â”‚  â”‚
â”‚  â”œâ”€ dashboard/                # EXEMPLE DE FONCTIONNALITÃ‰ (Route: /dashboard) - PROTÃ‰GÃ‰E
â”‚  â”‚  â”œâ”€ components/            # Composants SPÃ‰CIFIQUES Ã  la page principale
â”‚  â”‚  â”‚  â”œâ”€ ExempleComposant1.tsx # EXEMPLE - Composant dashboard 1
â”‚  â”‚  â”‚  â””â”€ ExempleComposant2.tsx # EXEMPLE - Composant dashboard 2
â”‚  â”‚  â”œâ”€ hooks/                 # Hooks SPÃ‰CIFIQUES au dashboard
â”‚  â”‚  â”‚  â”œâ”€ ExempleHook1.ts     # EXEMPLE - Hook dashboard 1
â”‚  â”‚  â”‚  â””â”€ ExempleHook2.ts     # EXEMPLE - Hook dashboard 2
â”‚  â”‚  â”œâ”€ lib/                   # Libs SPÃ‰CIFIQUES au dashboard
â”‚  â”‚  â”‚  â”œâ”€ ExempleLib1.ts      # EXEMPLE - Lib dashboard 1
â”‚  â”‚  â”‚  â””â”€ ExempleLib2.ts      # EXEMPLE - Lib dashboard 2
â”‚  â”‚  â”œâ”€ settings/              # EXEMPLE - SOUS-PAGE (Route: /dashboard/settings) - PROTÃ‰GÃ‰E
â”‚  â”‚  â”‚  â”œâ”€ components/         # Composants SPÃ‰CIFIQUES Ã  la sous-page
â”‚  â”‚  â”‚  â”‚  â”œâ”€ ExempleComposant1.tsx # EXEMPLE - Composant settings 1
â”‚  â”‚  â”‚  â”‚  â””â”€ ExempleComposant2.tsx # EXEMPLE - Composant settings 2
â”‚  â”‚  â”‚  â”œâ”€ hooks/              # Hooks SPÃ‰CIFIQUES Ã  la sous-page
â”‚  â”‚  â”‚  â”‚  â”œâ”€ ExempleHook1.ts  # EXEMPLE - Hook settings 1
â”‚  â”‚  â”‚  â”‚  â””â”€ ExempleHook2.ts  # EXEMPLE - Hook settings 2
â”‚  â”‚  â”‚  â”œâ”€ lib/                # Libs SPÃ‰CIFIQUES Ã  la sous-page
â”‚  â”‚  â”‚  â”‚  â”œâ”€ ExempleLib1.ts   # EXEMPLE - Lib settings 1
â”‚  â”‚  â”‚  â”‚  â””â”€ ExempleLib2.ts   # EXEMPLE - Lib settings 2
â”‚  â”‚  â”‚  â”œâ”€ page.tsx            # EXEMPLE - Page de la sous-page
â”‚  â”‚  â”‚  â””â”€ types.ts            # EXEMPLE - Types spÃ©cifiques Ã  settings
â”‚  â”‚  â”œâ”€ page.tsx               # EXEMPLE - Page principale
â”‚  â”‚  â”œâ”€ layout.tsx             # EXEMPLE - Layout pour toute la fonctionnalitÃ©
â”‚  â”‚  â””â”€ types.ts               # EXEMPLE - Types spÃ©cifiques Ã  dashboard
â”‚  â”‚
â”‚  â”œâ”€ globals.css               # Styles globaux de l'application
â”‚  â”œâ”€ layout.tsx                # ROOT - Layout principal avec SessionProvider
â”‚  â””â”€ page.tsx                  # ROOT - Page d'accueil (redirige selon auth)
â”œâ”€ middleware.ts                # AUTH - Protection des routes (/dashboard/*) (OBLIGATOIRE Ã  la racine)
â”œâ”€ docker-compose.yml           # DATABASE - Configuration PostgreSQL + pgAdmin
â”œâ”€ .env                         # CONFIG - Variables d'environnement (sensibles)
â”œâ”€ .env.example                 # CONFIG - Template des variables d'environnement
â”œâ”€ .gitignore                   # CONFIG - Fichiers ignorÃ©s par Git
â”œâ”€ package.json                 # CONFIG - DÃ©pendances et scripts npm
â”œâ”€ tsconfig.json                # CONFIG - Configuration TypeScript  
â”œâ”€ next.config.ts               # CONFIG - Configuration Next.js
â”œâ”€ tailwind.config.ts           # CONFIG - Configuration Tailwind CSS
â”œâ”€ postcss.config.mjs           # CONFIG - Configuration PostCSS
â”œâ”€ rules/                       # DOC - Documentation et rÃ¨gles du projet
â”‚  â”œâ”€ rules.md                  # DOC - Architecture et conventions (ce fichier)
â”‚  â””â”€ tech-stack.md             # DOC - Stack technique dÃ©taillÃ©
â””â”€ README.md                    # DOC - Documentation du projet
```

---

## 2. Convention de Nommage des Fichiers

Pour une fonctionnalitÃ© `[nom]`, respecter cette convention stricte :

### **Hooks React :**
- **Format :** `use[Nom].ts` (PascalCase aprÃ¨s "use")
- **Exemples :** `useAuth.ts`, `useDashboard.ts`, `useUser.ts`
- **RÃ¨gle :** TOUJOURS commencer par "use" (convention React obligatoire)

### **Librairies/Utilitaires :**
- **Format :** `[nom].ts` (camelCase)
- **Exemples :** `auth.ts`, `dashboard.ts`, `user.ts`
- **RÃ¨gle :** Nom simple et explicite de la fonctionnalitÃ©

### **Types TypeScript :**
- **Format :** `[nom].ts` (camelCase)
- **Exemples :** `auth.ts`, `dashboard.ts`, `user.ts`
- **RÃ¨gle :** MÃªme nom que le fichier lib correspondant

### **Exemple complet pour une fonctionnalitÃ© "user-management" :**
```
user-management/
â”œâ”€ hooks/useUser.ts          # Hook pour gestion utilisateurs
â”œâ”€ lib/user.ts               # Fonctions utilitaires utilisateurs
â””â”€ types.ts                  # Types spÃ©cifiques Ã  user-management
```

---

## 3. Configuration Authentification (NextAuth.js + Providers OAuth)

### **ðŸ”¥ Template NextAuth.js - Copy/Paste Ready**

### **Variables d'environnement (.env) :**
```env
# NextAuth.js Configuration
NEXTAUTH_SECRET=your-64-char-secret-key
NEXTAUTH_URL=http://localhost:3000

# OAuth Providers (optionnel - ajouter selon besoins)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GITHUB_CLIENT_ID=your-github-client-id  
GITHUB_CLIENT_SECRET=your-github-client-secret
```

### **Architecture NextAuth.js - 5 fichiers essentiels :**
1. **`_shared/lib/auth.ts`** â†’ Configuration serveur NextAuth
2. **`_shared/hooks/useAuth.ts`** â†’ Hook client principal
3. **`api/auth/[...nextauth]/route.ts`** â†’ Handler API NextAuth  
4. **`middleware.ts`** â†’ Protection routes cÃ´tÃ© serveur
5. **`_shared/components/SessionProvider.tsx`** â†’ Provider React

### **Template NextAuth.js - Configuration complÃ¨te :**

#### **1. Configuration serveur (_shared/lib/auth.ts) :**
```typescript
import { NextAuthOptions } from "next-auth"
import GoogleProvider from "next-auth/providers/google"
import { PrismaAdapter } from "@auth/prisma-adapter"
import { prisma } from "../database/client"

export const authOptions: NextAuthOptions = {
  adapter: PrismaAdapter(prisma),
  providers: [
    GoogleProvider({
      clientId: process.env.GOOGLE_CLIENT_ID!,
      clientSecret: process.env.GOOGLE_CLIENT_SECRET!,
    }),
  ],
  callbacks: {
    session: ({ session, user }) => ({
      ...session,
      user: {
        ...session.user,
        id: user.id,
      },
    }),
  },
  pages: {
    signIn: "/login",
  },
}
```

#### **2. Hook client principal (_shared/hooks/useAuth.ts) :**
```typescript
"use client"
import { useSession, signIn, signOut } from "next-auth/react"

export function useAuth() {
  const { data: session, status } = useSession()
  
  return {
    // Ã‰tat de la session
    user: session?.user || null,
    session: session || null,
    isLoading: status === "loading",
    isAuthenticated: !!session?.user,
    
    // MÃ©thodes d'authentification
    signIn: (provider?: string) => signIn(provider),
    signOut: () => signOut({ callbackUrl: "/login" }),
    
    // Informations utilisateur
    userId: session?.user?.id || null,
    userEmail: session?.user?.email || null,
    userName: session?.user?.name || null,
    userImage: session?.user?.image || null,
  }
}
```

#### **3. Route API (api/auth/[...nextauth]/route.ts) :**
```typescript
import NextAuth from "next-auth"
import { authOptions } from "../../../_shared/lib/auth"

const handler = NextAuth(authOptions)

export { handler as GET, handler as POST }
```

#### **4. Middleware (middleware.ts) :**
```typescript
import { NextRequest, NextResponse } from "next/server"
import { getToken } from "next-auth/jwt"

const PROTECTED_ROUTES = ["/dashboard"]

export async function middleware(request: NextRequest) {
  const { pathname } = request.nextUrl
  const isProtectedRoute = PROTECTED_ROUTES.some(route => 
    pathname.startsWith(route)
  )

  if (isProtectedRoute) {
    try {
      const token = await getToken({ 
        req: request,
        secret: process.env.NEXTAUTH_SECRET 
      })

      if (!token) {
        return NextResponse.redirect(new URL("/login", request.url))
      }

      return NextResponse.next()
    } catch {
      return NextResponse.redirect(new URL("/login", request.url))
    }
  }

  if (pathname === "/login") {
    try {
      const token = await getToken({ 
        req: request,
        secret: process.env.NEXTAUTH_SECRET 
      })

      if (token) {
        return NextResponse.redirect(new URL("/dashboard", request.url))
      }
    } catch {
      // Erreur silencieuse, permettre l'accÃ¨s Ã  /login
    }
  }

  return NextResponse.next()
}

export const config = {
  matcher: [
    "/((?!api|_next/static|_next/image|favicon.ico|.*\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)",
  ],
}
```

#### **5. SessionProvider (_shared/components/SessionProvider.tsx) :**
```typescript
"use client"
import { SessionProvider as NextAuthSessionProvider } from "next-auth/react"

export function SessionProvider({ children }: { children: React.ReactNode }) {
  return <NextAuthSessionProvider>{children}</NextAuthSessionProvider>
}
```

---

### **ðŸš€ Configuration AvancÃ©e NextAuth.js**

#### **Multi-Providers OAuth :**
```typescript
// Dans authOptions - Support Google, GitHub, Discord
providers: [
  GoogleProvider({
    clientId: process.env.GOOGLE_CLIENT_ID!,
    clientSecret: process.env.GOOGLE_CLIENT_SECRET!,
  }),
  GitHubProvider({
    clientId: process.env.GITHUB_CLIENT_ID!,
    clientSecret: process.env.GITHUB_CLIENT_SECRET!,
  }),
  DiscordProvider({
    clientId: process.env.DISCORD_CLIENT_ID!,
    clientSecret: process.env.DISCORD_CLIENT_SECRET!,
  }),
]
```

#### **Callbacks AvancÃ©s :**
```typescript
callbacks: {
  session: ({ session, user }) => ({
    ...session,
    user: {
      ...session.user,
      id: user.id,
    },
  }),
  jwt: ({ token, user }) => {
    if (user) {
      token.id = user.id
    }
    return token
  },
}
```

#### **Commandes essentielles :**
```bash
# Installation NextAuth.js
npm install next-auth @auth/prisma-adapter

# GÃ©nÃ©rer secret 64 caractÃ¨res
openssl rand -base64 32

# Setup Prisma pour NextAuth
npx prisma generate
npx prisma db push

# DÃ©marrage dÃ©veloppement
npm run dev

# Test production build
npm run build
```

---

## 4. Configuration Base de DonnÃ©es (Prisma + PostgreSQL + Docker)

### **Variables d'environnement requises (.env) :**
```
DATABASE_URL="postgresql://repricer_user:repricer_password@localhost:5432/repricer_db?schema=public"
```

### **Structure de base de donnÃ©es implÃ©mentÃ©e :**
- **SchÃ©ma** : `prisma/schema.prisma` (modÃ¨les User, Account, Session, VerificationToken pour NextAuth)
- **Client** : `_shared/database/client.ts` (singleton Prisma avec configuration optimisÃ©e)
- **Types** : `_shared/database/types.ts` (rÃ©export des types Prisma + utilitaires CRUD)
- **RequÃªtes** : `_shared/database/queries/user.ts` (fonctions CRUD pour utilisateurs)
- **Hook client** : `_shared/hooks/useDatabase.ts` (opÃ©rations cÃ´tÃ© client via API)
- **API Users** : `/api/users` (GET/POST) et `/api/users/[id]` (GET/PATCH/DELETE)
- **Adapter** : NextAuth configurÃ© avec PrismaAdapter pour sessions en base

### **Commandes essentielles :**
```bash
# Docker
npm run db:start           # DÃ©marre PostgreSQL + pgAdmin
npm run db:stop            # ArrÃªte les conteneurs

# Prisma  
npm run db:generate        # GÃ©nÃ¨re le client TypeScript
npm run db:push           # Synchronise le schÃ©ma avec la DB
npm run db:studio         # Interface graphique Prisma Studio
```

### **AccÃ¨s aux interfaces :**
- **Prisma Studio** : http://localhost:5555 (aprÃ¨s `npm run db:studio`)
- **pgAdmin** : http://localhost:5050 (admin@repricer.com / admin123)

---

## 5. Troubleshooting Base de DonnÃ©es

### **ðŸš¨ PROBLÃˆME COURANT - Conflit Port PostgreSQL :**

**SYMPTÃ”ME :** Erreur Prisma `P1010: User was denied access on the database (not available)` alors que Docker PostgreSQL semble dÃ©marrer correctement.

**CAUSE :** Conflit de port entre PostgreSQL local (Homebrew) et Docker PostgreSQL - les deux tentent d'utiliser le port 5432.

**DIAGNOSTIC :**
```bash
# VÃ©rifier si PostgreSQL local tourne
brew services list | grep postgres

# VÃ©rifier qui utilise le port 5432
lsof -i :5432
```

**SOLUTION :**
```bash
# ArrÃªter PostgreSQL local
brew services stop postgresql@15

# Nettoyer et redÃ©marrer Docker
npm run db:clean
npm run db:start

# Tester Prisma
npx prisma db push
```

**PREVENTION :** Toujours arrÃªter PostgreSQL local avant de dÃ©velopper avec Docker.

### **ðŸš« INTERDICTION ABSOLUE - SQLite :**

**RÃˆGLE IMPÃ‰RATIVE :** Ne JAMAIS suggÃ©rer ou utiliser SQLite comme solution de contournement.

**CONTEXTE :** Quand l'IA galÃ¨re avec PostgreSQL, elle propose souvent SQLite comme "solution rapide".

**POURQUOI C'EST INTERDIT :**
- Le projet est conÃ§u pour PostgreSQL en production
- Better Auth nÃ©cessite PostgreSQL pour certaines fonctionnalitÃ©s
- SQLite cache les vrais problÃ¨mes de configuration
- Migration SQLite â†’ PostgreSQL = galÃ¨re assurÃ©e

**EN CAS DE PROBLÃˆME DB :** 
1. Diagnostiquer le problÃ¨me rÃ©el (conflit port, Docker, etc.)
2. RÃ©soudre la cause racine
3. JAMAIS de solution SQLite temporaire

---

## 6. RÃ¨gles de DÃ©veloppement

### **Ã‰viter npm run dev automatique :**
- **RÃˆGLE IMPÃ‰RATIVE** : Ne PAS exÃ©cuter `npm run dev` aprÃ¨s chaque modification
- **Contexte** : L'utilisateur a gÃ©nÃ©ralement dÃ©jÃ  l'application lancÃ©e sur le port 3000
- **Exception** : Lancer `npm run dev` UNIQUEMENT si c'est explicitement nÃ©cessaire pour tester une fonctionnalitÃ© critique
- **Bonne pratique** : Indiquer simplement que les modifications ont Ã©tÃ© apportÃ©es et sont prÃªtes Ã  Ãªtre testÃ©es

### **Ã‰viter npm run build automatique :**
- **RÃˆGLE IMPÃ‰RATIVE** : Ne PAS exÃ©cuter `npm run build` automatiquement aprÃ¨s chaque modification
- **Contexte** : Les builds sont coÃ»teux en temps et l'utilisateur prÃ©fÃ¨re les contrÃ´ler manuellement
- **Exception** : ExÃ©cuter `npm run build` UNIQUEMENT si explicitement demandÃ© par l'utilisateur ou si critique pour valider des changements majeurs
- **Bonne pratique** : Faire confiance aux linters et Ã  TypeScript pour dÃ©tecter les erreurs sans build complet

### **Ã‰viter la crÃ©ation de documentation automatique :**
- **RÃˆGLE IMPÃ‰RATIVE** : Ne JAMAIS crÃ©er de fichiers de documentation (.md, README, etc.) Ã  moins que l'utilisateur le demande explicitement
- **Contexte** : L'utilisateur gÃ¨re sa propre documentation et n'a pas besoin de fichiers supplÃ©mentaires non sollicitÃ©s
- **Exception** : CrÃ©er de la documentation UNIQUEMENT si c'est explicitement demandÃ© par l'utilisateur
- **Bonne pratique** : Se concentrer sur le code fonctionnel plutÃ´t que sur la documentation

### **Code propre - Commentaires et logs :**
- **RÃˆGLE IMPÃ‰RATIVE** : Ne JAMAIS ajouter de commentaires ou de logs console dans le code
- **Contexte** : Le code doit rester propre et lisible sans commentaires superflus
- **Interdictions** :
  - `console.log()`, `console.error()`, `console.warn()`, etc.
  - Commentaires `//` ou `/* */` explicatifs
  - Commentaires JSX `{/* */}`
  - Logs de debug ou de dÃ©veloppement
- **Exception UNIQUE** : Ajouter des commentaires/logs UNIQUEMENT si l'utilisateur le demande explicitement
- **Outils disponibles** : Utiliser `npm run clean:code` pour nettoyer automatiquement le code existant (script dans `scripts/cleanup-code.js`)
- **Bonne pratique** : Ã‰crire du code auto-documentÃ© avec des noms de variables et fonctions explicites

### **Ã‰viter les diagrammes automatiques :**
- **RÃˆGLE IMPÃ‰RATIVE** : Ne JAMAIS crÃ©er de diagrammes Mermaid automatiquement aprÃ¨s chaque modification
- **Contexte** : Les diagrammes ne sont pas toujours nÃ©cessaires et peuvent encombrer la conversation
- **Interdictions** :
  - Diagrammes automatiques aprÃ¨s chaque changement de code
  - Diagrammes explicatifs non sollicitÃ©s
  - Visualisations systÃ©matiques des flux de donnÃ©es
- **Exception UNIQUE** : CrÃ©er des diagrammes UNIQUEMENT si l'utilisateur le demande explicitement
- **Bonne pratique** : Se concentrer sur l'implÃ©mentation fonctionnelle plutÃ´t que sur la documentation visuelle

### **Gestion Git et dÃ©ploiement :**
- **RÃˆGLE IMPÃ‰RATIVE** : Ne JAMAIS exÃ©cuter `git push`
- **RÃˆGLE IMPÃ‰RATIVE** : Ne PAS commiter aprÃ¨s chaque petit changement
- **Contexte** : L'utilisateur gÃ¨re lui-mÃªme les push depuis GitHub Desktop
- **Commits** : Grouper les changements liÃ©s et commiter seulement quand une fonctionnalitÃ© complÃ¨te est terminÃ©e
- **Autorisation** : Commits locaux (`git add` + `git commit`) autorisÃ©s pour organiser le travail complet

### **Couleurs et design :**
- **RÃˆGLE IMPÃ‰RATIVE** : TOUJOURS utiliser les couleurs CSS personnalisÃ©es dÃ©finies dans `src/app/globals.css`
- **Contexte** : Le projet utilise un systÃ¨me de couleurs cohÃ©rent avec support automatique du dark mode
- **Utilisation** : Utiliser les classes Tailwind correspondantes : `bg-background`, `text-foreground`, `border-border`, etc.
- **Interdictions** :
  - Couleurs hardcodÃ©es : `#ffffff`, `rgb(255,255,255)`, `hsl(0,0%,100%)`, etc.
  - Classes Tailwind avec couleurs fixes : `bg-white`, `text-black`, `border-gray-200`, etc.
- **Exception** : Utiliser des couleurs hardcodÃ©es UNIQUEMENT si explicitement demandÃ© par l'utilisateur
- **Bonne pratique** : Respecter le systÃ¨me de design pour maintenir la cohÃ©rence visuelle et le support automatique des thÃ¨mes

### **Espacement et layout :**
- **RÃˆGLE IMPÃ‰RATIVE** : PrivilÃ©gier l'utilisation de `gap` pour l'espacement entre Ã©lÃ©ments
- **Contexte** : `gap` est plus moderne, prÃ©visible et maintenable que `space-*`, `margin` ou `padding` pour l'espacement entre Ã©lÃ©ments
- **Utilisation recommandÃ©e** :
  - `flex flex-col gap-4` au lieu de `space-y-4`
  - `flex gap-2` au lieu de marges entre Ã©lÃ©ments
  - `grid gap-6` pour les grilles
- **Garder `margin` et `padding` uniquement pour** :
  - L'espacement interne d'un composant (`p-4`, `px-6`, `py-3`)
  - Les positionnements absolus (`mb-2` pour dÃ©caler un Ã©lÃ©ment spÃ©cifique)
  - Les cas oÃ¹ `gap` ne s'applique pas (Ã©lÃ©ments non dans un container flex/grid)
- **Bonne pratique** : Utiliser `gap` dÃ¨s qu'on a plusieurs Ã©lÃ©ments enfants Ã  espacer dans un conteneur

### **Curseurs interactifs :**
- **RÃˆGLE IMPÃ‰RATIVE** : TOUJOURS ajouter `cursor-pointer` sur les Ã©lÃ©ments cliquables
- **Contexte** : L'UX doit Ãªtre claire - l'utilisateur doit immÃ©diatement comprendre qu'un Ã©lÃ©ment est interactif
- **Utilisation obligatoire sur** :
  - Tous les boutons (`<button>`)
  - Tous les liens (`<a>`)
  - Tous les Ã©lÃ©ments avec `onClick`, `onSubmit`, etc.
  - Tous les Ã©lÃ©ments interactifs (cartes cliquables, etc.)
- **Exception** : Les Ã©lÃ©ments dÃ©sactivÃ©s peuvent utiliser `cursor-not-allowed`
- **Bonne pratique** : Toujours tester l'interaction en survolant les Ã©lÃ©ments pour vÃ©rifier la prÃ©sence du curseur main
